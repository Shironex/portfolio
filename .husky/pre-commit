#!/bin/sh

# Colors for nice output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

echo "${BLUE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
echo "${BLUE}ğŸš€ Running pre-commit checks...${NC}"
echo "${BLUE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"

# Run lint-staged
echo "\n${YELLOW}ğŸ“ Running lint-staged...${NC}"
npx lint-staged
if [ $? -ne 0 ]; then
  echo "${RED}âœ— Lint-staged failed!${NC}"
  exit 1
fi
echo "${GREEN}âœ“ Lint-staged passed${NC}"

# Run ESLint
echo "\n${YELLOW}ğŸ” Running ESLint...${NC}"
pnpm lint
if [ $? -ne 0 ]; then
  echo "${RED}âœ— Linting failed!${NC}"
  exit 1
fi
echo "${GREEN}âœ“ Linting passed${NC}"

# Run TypeScript type checking
echo "\n${YELLOW}ğŸ” Running TypeScript type checking...${NC}"
pnpm typecheck
if [ $? -ne 0 ]; then
  echo "${RED}âœ— Type checking failed!${NC}"
  exit 1
fi
echo "${GREEN}âœ“ Type checking passed${NC}"

# Build the project
echo "\n${YELLOW}ğŸ—ï¸  Building the project...${NC}"
pnpm build
if [ $? -ne 0 ]; then
  echo "${RED}âœ— Build failed!${NC}"
  exit 1
fi
echo "${GREEN}âœ“ Build passed${NC}"

echo "\n${BLUE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
echo "${GREEN}âœ… All pre-commit checks passed!${NC}"
echo "${BLUE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}\n" 